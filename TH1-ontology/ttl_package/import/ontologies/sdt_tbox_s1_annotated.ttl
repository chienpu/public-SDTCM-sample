@prefix sdt:  <http://builtinsight.io/ontology/sdt#> .
@prefix sosa: <http://www.w3.org/ns/sosa/> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix ifc:  <http://ifcowl.openbimstandards.org/IFC4x3#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix owl:  <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh:   <http://www.w3.org/ns/shacl#> .

<http://builtinsight.io/ontology/sdt>
    a owl:Ontology ;
    rdfs:label "Semantic Digital Thread (SDT) — TBox S1 Kernel" ;
    owl:versionIRI <http://builtinsight.io/ontology/sdt/0.1> .

#################################################################
# 1. Classes
#################################################################
# --- SDT paper-facing core abstractions (operational semantic backbone) ---
# Note: The following classes are SDT-level abstractions introduced to support
# "semantic-to-execution" workflows. They are aligned with relevant standards
# conceptually, but are not intended as direct replications of standard entities.

sdt:BuildingElement a owl:Class ;
    rdfs:label "Building Element" ;
    rdfs:comment "Physical components serving as spatial and lifecycle anchors. This SDT-level class is intended to reference (not replicate) BIM element concepts (e.g., IFC elements) in an external, decoupled knowledge-graph layer." .

sdt:CarbonItem a owl:Class ;
    rdfs:label "Carbon Item" ;
    rdfs:comment "SDT-level accounting abstraction aligned with EN 15978 lifecycle modules (e.g., B2–B4, B6) for dynamic emission tracking. Not a direct replication of standard entities." .

sdt:ObservationEvent a owl:Class ;
    rdfs:label "Observation Event" ;
    rdfs:comment "SDT-internal convergence construct linking lifecycle context, asset context, and telemetry evidence to support graph-native reasoning across domains (EN 15978 + BIM + SOSA/SSN)." .

sdt:WorkflowTask a owl:Class ;
    rdfs:label "Workflow Task" ;
    rdfs:subClassOf sdt:GeneratedTask ;
    rdfs:comment "Executable action unit in the SDT execution layer, triggered by reasoning results and consumed by external workflow engines. This class does not replicate BPMN or IfcTask; it serves as a lightweight semantic trigger with status tracking." .



sdt:Asset                 a owl:Class ; rdfs:label "Asset" .
sdt:EmissionFactor        a owl:Class ; rdfs:label "Emission Factor" .
sdt:ActivityQuantity      a owl:Class ; rdfs:label "Activity Quantity" .
sdt:LifecycleModule       a owl:Class ; rdfs:label "Lifecycle Module" .
sdt:Anomaly               a owl:Class ; rdfs:label "Anomaly" .
sdt:GeneratedTask a owl:Class ;
    rdfs:label "Generated Task" ;
    rdfs:comment "SDT-generated task artifact produced by graph-native reasoning. Instances of this class represent actionable work items prior to orchestration/dispatch in external workflow platforms." .
sdt:PerformanceData       a owl:Class ; rdfs:label "Performance Data" .

sdt:CarbonResult          a owl:Class ; rdfs:label "Carbon Result" .
sdt:OperationalCarbonResult a owl:Class ;
    rdfs:subClassOf sdt:CarbonResult ;
    rdfs:label "Operational Carbon Result" .
sdt:EmbodiedCarbonResult  a owl:Class ;
    rdfs:subClassOf sdt:CarbonResult ;
    rdfs:label "Embodied Carbon Result" .

# SOSA / PROV placeholders
sosa:Sensor               a owl:Class ; rdfs:label "Sensor" .
sosa:Observation          a owl:Class ; rdfs:label "Observation" .
sosa:Result               a owl:Class ; rdfs:label "Result" .
sosa:ObservableProperty   a owl:Class ; rdfs:label "Observable Property" .
prov:Entity               a owl:Class ; rdfs:label "Entity" .
prov:Activity             a owl:Class ; rdfs:label "Activity" .
prov:Agent                a owl:Class ; rdfs:label "Agent" .

#################################################################
# 2. Object Properties (SDT Core)
#################################################################

sdt:monitors a owl:ObjectProperty ;
    rdfs:domain sosa:Sensor ;
    rdfs:range  sdt:Asset ;
    rdfs:label "monitors" .

sdt:hasObservation a owl:ObjectProperty ;
    rdfs:domain sdt:Asset ;
    rdfs:range  sosa:Observation ;
    rdfs:label "has observation" .

sdt:triggers a owl:ObjectProperty ;
    rdfs:domain sosa:Observation ;
    rdfs:range  sdt:Anomaly ;
    rdfs:label "triggers anomaly" .

sdt:generates a owl:ObjectProperty ;
    rdfs:domain sdt:Anomaly ;
    rdfs:range  sdt:GeneratedTask ;
    rdfs:label "generates task" .

sdt:aboutAsset a owl:ObjectProperty ;
    rdfs:domain sdt:CarbonResult ;
    rdfs:range  sdt:Asset ;
    rdfs:label "about asset" .

sdt:hasModule a owl:ObjectProperty ;
    rdfs:domain sdt:CarbonResult ;
    rdfs:range  sdt:LifecycleModule ;
    rdfs:label "has lifecycle module" .

sdt:derivedFromFactor a owl:ObjectProperty ;
    rdfs:domain sdt:CarbonResult ;
    rdfs:range  sdt:EmissionFactor ;
    rdfs:label "derived from factor" .

sdt:hasQuantity a owl:ObjectProperty ;
    rdfs:domain sdt:CarbonResult ;
    rdfs:range  sdt:ActivityQuantity ;
    rdfs:label "has activity quantity" .

#################################################################
# 3. SOSA / PROV Object Properties
#################################################################

sosa:madeBySensor a owl:ObjectProperty ;
    rdfs:domain sosa:Observation ;
    rdfs:range  sosa:Sensor ;
    rdfs:label "made by sensor" .

sosa:hasFeatureOfInterest a owl:ObjectProperty ;
    rdfs:domain sosa:Observation ;
    rdfs:range  sdt:Asset ;
    rdfs:label "feature of interest" .

sosa:hasResult a owl:ObjectProperty ;
    rdfs:domain sosa:Observation ;
    rdfs:range  sosa:Result ;
    rdfs:label "has result" .

sosa:observes a owl:ObjectProperty ;
    rdfs:domain sosa:Sensor ;
    rdfs:range  sosa:ObservableProperty ;
    rdfs:label "observes property" .

prov:used a owl:ObjectProperty ;
    rdfs:domain prov:Activity ;
    rdfs:range  prov:Entity ;
    rdfs:label "used entity" .

prov:wasGeneratedBy a owl:ObjectProperty ;
    rdfs:domain prov:Entity ;
    rdfs:range  prov:Activity ;
    rdfs:label "was generated by" .

prov:wasAttributedTo a owl:ObjectProperty ;
    rdfs:domain prov:Entity ;
    rdfs:range  prov:Agent ;
    rdfs:label "was attributed to" .

prov:wasDerivedFrom a owl:ObjectProperty ;
    rdfs:domain prov:Entity ;
    rdfs:range  prov:Entity ;
    rdfs:label "was derived from" .

#################################################################
# 4. Datatype Properties
#################################################################

sdt:value a owl:DatatypeProperty ;
    rdfs:range xsd:decimal ;
    rdfs:label "numeric value" .

sdt:unit a owl:DatatypeProperty ;
    rdfs:range xsd:string ;
    rdfs:label "unit of measurement" .

sdt:timestamp a owl:DatatypeProperty ;
    rdfs:range xsd:dateTime ;
    rdfs:label "timestamp" .

sdt:ifcGUID a owl:DatatypeProperty ;
    rdfs:domain sdt:Asset ;
    rdfs:range xsd:string ;
    rdfs:label "IFC Global ID" .

sdt:source a owl:DatatypeProperty ;
    rdfs:range xsd:string ;
    rdfs:label "data source" .

sdt:confidenceScore a owl:DatatypeProperty ;
    rdfs:range xsd:decimal ;
    rdfs:label "confidence score" .

sdt:uncertainty a owl:DatatypeProperty ;
    rdfs:range xsd:decimal ;
    rdfs:label "uncertainty" .

#################################################################
# 5. Lifecycle Module Individuals (BS EN 15978)
#################################################################

sdt:A1 a sdt:LifecycleModule ; rdfs:label "A1 Raw material supply" .
sdt:A2 a sdt:LifecycleModule ; rdfs:label "A2 Transport" .
sdt:A3 a sdt:LifecycleModule ; rdfs:label "A3 Manufacturing" .
sdt:A4 a sdt:LifecycleModule ; rdfs:label "A4 Transport to site" .
sdt:A5 a sdt:LifecycleModule ; rdfs:label "A5 Construction/installation" .
sdt:B6 a sdt:LifecycleModule ; rdfs:label "B6 Operational energy use" .
sdt:C1 a sdt:LifecycleModule ; rdfs:label "C1 De-construction/demolition" .
sdt:C2 a sdt:LifecycleModule ; rdfs:label "C2 Transport (EoL)" .
sdt:C3 a sdt:LifecycleModule ; rdfs:label "C3 Waste processing" .
sdt:C4 a sdt:LifecycleModule ; rdfs:label "C4 Disposal" .

#################################################################
# 6. Minimal Test Instances
#################################################################

sdt:AHU12 a sdt:Asset ;
    sdt:ifcGUID "3adG-XYZ-123" ;
    rdfs:label "Air Handling Unit 12" .

sdt:AHU12_T1 a sosa:Sensor ;
    sdt:monitors sdt:AHU12 ;
    rdfs:label "Temperature Sensor T1" .

sdt:Obs001 a sosa:Observation ;
    sosa:madeBySensor sdt:AHU12_T1 ;
    sosa:hasFeatureOfInterest sdt:AHU12 ;
    sdt:value "31.2"^^xsd:decimal ;
    sdt:unit "°C" ;
    sdt:timestamp "2025-10-08T13:00:00Z"^^xsd:dateTime ;
    rdfs:label "Temperature Observation" .

#################################################################
# 7. SHACL Shapes (Optional Validation Rules)
#################################################################

# Operational Carbon Result Shape
sdt:OperationalResultShape
    a sh:NodeShape ;
    sh:targetClass sdt:OperationalCarbonResult ;
    sh:property [
        sh:path sdt:hasModule ;
        sh:hasValue sdt:B6 ;
        sh:message "Operational carbon results must belong to module B6." ;
    ] ;
    sh:property [
        sh:path sdt:value ;
        sh:datatype xsd:decimal ;
        sh:minCount 1 ;
        sh:message "OperationalCarbonResult must have a numeric value." ;
    ] ;
    sh:property [
        sh:path sdt:timestamp ;
        sh:datatype xsd:dateTime ;
        sh:minCount 1 ;
        sh:message "OperationalCarbonResult must have a timestamp." ;
    ] .

# Observation Shape
sdt:ObservationShape
    a sh:NodeShape ;
    sh:targetClass sosa:Observation ;
    sh:property [
        sh:path sosa:madeBySensor ;
        sh:minCount 1 ;
        sh:message "Each Observation must be linked to a Sensor." ;
    ] ;
    sh:property [
        sh:path sosa:hasFeatureOfInterest ;
        sh:minCount 1 ;
        sh:message "Each Observation must indicate its observed Asset." ;
    ] .
